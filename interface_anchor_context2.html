<p><!-- Bootstrap v3.0.3 --></p>
<link href="mturk2.css" rel="stylesheet" />
<!--<link href="https://zhaomin.s3.us-east-2.amazonaws.com/mturk/mturk2.css" rel="stylesheet" />-->

<script language="JavaScript">

  function show(type) {
    // validate the click order
    var before_state = document.getElementById("button_before").style.display;
    var anchor_state = document.getElementById("button_anchor").style.display;
    var after_state = document.getElementById("button_after").style.display;
    var step1_error = document.getElementById("step1_error");
    var step2_error = document.getElementById("step2_error");
    var step3_error = document.getElementById("step3_error");
    if (type === 'before') {
      if (!(anchor_state === 'block' && after_state === 'block')) {
        step1_error.style.display = 'block';
        step2_error.style.display = 'none';
        step3_error.style.display = 'none';
        return false;
      }
    }
    if (type === 'anchor') {
      if (!(before_state === 'none' && after_state === 'block')) {
        step1_error.style.display = 'none';
        step2_error.style.display = 'block';
        step3_error.style.display = 'none';
        return false;
      }
    }
    if (type === 'after') {
      if (!(before_state === 'none' && anchor_state === 'none')) {
        step1_error.style.display = 'none';
        step2_error.style.display = 'none';
        step3_error.style.display = 'block';
        return false;
      }
    }

    // show the table and hide the button
    var table = document.getElementById("table_"+type);
    table.style.display = 'block';
    var button = document.getElementById("button_"+type);
    button.style.display = 'none';

    // hide the error message if it is shown
    step1_error.style.display = 'none';
    step2_error.style.display = 'none';
    step3_error.style.display = 'none';
  }

  function validateForm() {
    // validate if the annotator has checked all tweets (context & anchor)
    var before_state = document.getElementById("button_before").style.display;
    var anchor_state = document.getElementById("button_anchor").style.display;
    var after_state = document.getElementById("button_after").style.display;
    var id_Q1yes = document.getElementById("id_Q1yes");
    var id_Q1no = document.getElementById("id_Q1no");
    var id_Q2_5 = document.getElementById("id_Q2_5");
    var id_Q2_4 = document.getElementById("id_Q2_4");
    var id_Q2_3 = document.getElementById("id_Q2_3");
    var id_Q2_2 = document.getElementById("id_Q2_2");
    var id_Q2_1 = document.getElementById("id_Q2_1");

    if (before_state === 'none' && anchor_state === 'none' && after_state === 'none') {
      // annotator has checked all tweets, check if annotator has completed Q1 and Q2
      if ((id_Q1yes.checked === true || id_Q1no.checked === true) && (id_Q2_1.checked === true ||
              id_Q2_2.checked === true || id_Q2_3.checked === true || id_Q2_4.checked === true || id_Q2_5.checked === true)) {
        // annotator has complete Q1 and Q2
        return true;
      } else {
        // any one or all of them is/are not completed
        if ((id_Q1yes.checked === false && id_Q1no.checked === false) && (id_Q2_1.checked === true || id_Q2_2.checked === true
                || id_Q2_3.checked === true || id_Q2_4.checked === true || id_Q2_5.checked === true)) {
          // Q1 is not completed but Q2 is completed
          alert("Please complete the Q1!");
          return false;
        }
        if ((id_Q1yes.checked === true || id_Q1no.checked === true) && (id_Q2_1.checked === false && id_Q2_2.checked === false
                && id_Q2_3.checked === false && id_Q2_4.checked === false && id_Q2_5.checked === false)) {
          // Q2 is not completed but Q1 is completed
          alert("Please complete the Q2!");
          return false;
        }
        if ((id_Q1yes.checked === false && id_Q1no.checked === false) && (id_Q2_1.checked === false && id_Q2_2.checked === false
                && id_Q2_3.checked === false && id_Q2_4.checked === false && id_Q2_5.checked === false)) {
          // both Q1 and Q2 are not completed
          alert("Please complete the Q1 and Q2!");
          return false;
        }
      }
    } else {
      // annotator needs to recheck some of tweets or all tweets
      alert("Please check all tweets and then submit your answer.");
      id_Q1yes.checked = false;
      id_Q1no.checked = false;
      id_Q2_5.checked = false;
      id_Q2_4.checked = false;
      id_Q2_3.checked = false;
      id_Q2_2.checked = false;
      id_Q2_1.checked = false;
      return false;
    }
  }

  window.onload = function() {
    document.getElementById('submitButton').setAttribute('onclick', 'return validateForm()');
  }

</script>

<!-- The instruction part -->
<section class="container" style="margin-bottom:15px; padding: 10px 10px; width: 1500px;">
  <div class="row col-xs-12 col-md-12">
    <div class="panel panel-primary">
      <p class="panel-heading"><span>Instructions</span></p>

      <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

        <p>In this task, you will see seven tweets in the order they were published. Your job is to determine
          whether the author was located in a <span style="color: rgb(128, 0, 0);"><strong>city</strong></span> when the author published the fourth tweet.
          Specifically, you will answer two questions:</p>

        <p>1. Was the author of the tweets located in <span style="color: rgb(128, 0, 0);"><strong>the city</strong></span> when the fourth tweet was published?</p>
        <ul>
          <li><strong>Yes</strong>, the author of the tweets was located in <span style="color: rgb(128, 0, 0);"><strong>the city</strong></span> when the fourth tweet was posted.</li>
          <li><strong>No</strong>, I cannot determine whether or not the author of the tweets was located in the <span style="color: rgb(128, 0, 0);"><strong>the city</strong></span> when the fourth tweet was posted.</li>
        </ul>

        <p>2. How confident are you about your answer?</p>
        <ul>
          <li><strong>5. Extremely confident</strong></li>
          <li><strong>4. Very confident</strong></li>
          <li><strong>3. Moderately confident</strong></li>
          <li><strong>2. Slightly confident</strong></li>
          <li><strong>1. Not confident at all</strong></li>
        </ul>

      </div>
    </div>
  </div>
</section>

<!-- The example of label Yes -->
<section class="container" style="margin-bottom:15px; padding: 10px 10px;  width: 1500px;">
  <div class="row col-xs-12 col-md-12">
    <div class="panel panel-primary">
      <p class="panel-heading"><span>Example of label Yes</span></p>

        <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

          <!-- explanation -->
          <p>The right label is <strong>Yes</strong> because
            the middle tweet and the first tweet of the three tweets before tell us that the author of the tweets was
          very likely to live in the <span style="color: rgb(128, 0, 0);"><strong>Houston</strong></span> when this tweet was posted.</p>

          <!-- context tweets before -->
          <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

            <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em;" width="1350">
              <tbody style="font-size: 1.0em; line-height: 1.6em;">

                <!-- context tweets before -->
                <tr>
                  <td width="450">
                    <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 1</p>
                    <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/yes_1.png" alt="yes_context_1" class="context_img_center">
                  </td>
                  <td width="450">
                    <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 2</p>
                    <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/yes_2.png" alt="yes_context_2" class="context_img_center">
                  </td>
                  <td width="450">
                    <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 3</p>
                    <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/yes_3.png" alt="yes_context_3" class="context_img_center">
                  </td>
                </tr>

              </tbody>
            </table>

          </div>

          <!-- anchor tweet -->
          <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

            <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em;" width="500">
              <tbody style="font-size: 1.0em; line-height: 1.6em;">

                <tr>
                  <td colspan="2">
                    <div>
                      <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 4</p>
                      <br>
                      <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/yes_middle.png" alt="yes_anchor" class="anchor_img_center">
                    </div>
                  </td>
                </tr>

              </tbody>
            </table>

          </div>

          <!-- context tweets after -->
          <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

            <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em;" width="1050">
              <tbody style="font-size: 1.0em; line-height: 1.6em;">

                <!-- context tweets before -->
                <tr>
                  <td width="300">
                    <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 5</p>
                    <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/yes_4.png" alt="yes_context_4" class="context_img_center">
                  </td>
                  <td width="300">
                    <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 6</p>
                    <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/yes_5.png" alt="yes_context_5" class="context_img_center">
                  </td>
                  <td width="300">
                    <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 7</p>
                    <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/yes_6.png" alt="yes_context_6" class="context_img_center">
                  </td>
                </tr>

              </tbody>
            </table>

          </div>

        </div>
    </div>
  </div>
</section>

<!-- The example of label No -->
<section class="container" style="margin-bottom:15px; padding: 10px 10px;  width: 1500px;">
  <div class="row col-xs-12 col-md-12">
    <div class="panel panel-primary">
      <p class="panel-heading"><span>Example of label No</span></p>

      <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

        <!-- explanation -->
        <p>The right label is <strong>No</strong> because
        the six tweets published before and after the middle tweet indicate that the user should be an official Twitter
        of an organization whose duty is to provide some useful information. And we cannot guarantee that this organization
        is located in the <span style="color: rgb(128, 0, 0);"><strong>Seattle</strong></span>.</p>

        <!-- context tweets before -->
        <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

          <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em;" width="1350">
            <tbody style="font-size: 1.0em; line-height: 1.6em;">

              <!-- context tweets before -->
              <tr>
                <td width="450">
                  <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 1</p>
                  <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/no_1.png" alt="no_context_1" class="context_img_center">
                </td>
                <td width="450">
                  <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 2</p>
                  <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/no_2.png" alt="no_context_2" class="context_img_center">
                </td>
                <td width="450">
                  <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 3</p>
                  <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/no_3.png" alt="no_context_3" class="context_img_center">
                </td>
              </tr>

            </tbody>
          </table>

        </div>

        <!-- anchor tweet -->
        <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

          <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em;" width="500">
            <tbody style="font-size: 1.0em; line-height: 1.6em;">

              <tr>
                <td colspan="2">
                  <div>
                    <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 4</p>
                    <br>
                    <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/no_middle.png" alt="no_anchor" class="anchor_img_center" />
                  </div>
                </td>
              </tr>

            </tbody>
          </table>

        </div>

        <!-- context tweets after -->
        <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">

          <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em;" width="1050">
            <tbody style="font-size: 1.0em; line-height: 1.6em;">

              <!-- context tweets before -->
              <tr>
                <td width="450">
                  <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 5</p>
                  <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/no_4.png" alt="no_context_4" class="context_img_center">
                </td>
                <td width="450">
                  <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 6</p>
                  <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/no_5.png" alt="no_context_5" class="context_img_center">
                </td>
                <td width="450">
                  <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 7</p>
                  <img src="https://zhaomin.s3.us-east-2.amazonaws.com/context_example/annotation_example/no_6.png" alt="no_context_6" class="context_img_center">
                </td>
              </tr>

            </tbody>
          </table>

        </div>

      </div>
    </div>
  </div>
</section>

<!-- The question part -->
<section class="container" style="margin-bottom:15px; padding: 10px 10px;  width: 1500px;">
  <div class="row col-xs-12 col-md-12">
    <div class="panel panel-primary">

      <p class="panel-heading"><span>Tweets & Questions</span></p>

      <!-- context tweets before section-->
      <div style="display: flex; justify-content: center; align-items: center">
        <button id="button_before" onclick="show('before')" style="display: block" class="show_button">
          STEP 1: Click to see Tweets 1, 2, and 3
        </button>
      </div>
      <div style="display: flex; justify-content: center; align-items: center">
        <p id="step1_error" style="color: red; margin: 10px; font-weight: bold; font-size: medium; display: none;">
          You need to check the tweet1, tweet2, and tweet3 firstly!
        </p>
      </div>
      <br />

      <div class="panel-body" id="table_before" style="font-size: 1.0em; line-height: 1.6em; display: none">

        <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em;" width="1350">
          <tbody style="font-size: 1.0em; line-height: 1.6em;">

            <!-- context tweets before -->
            <tr>
              <td width="450">
                <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 1</p>
                <img src=${context8_url} alt="context tweet7" class="context_img_center">
              </td>
              <td width="450">
                <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 2</p>
                <img src=${context9_url} alt="context tweet8" class="context_img_center">
              </td>
              <td width="450">
                <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 3</p>
                <img src=${context10_url} alt="context tweet9" class="context_img_center">
              </td>
            </tr>

          </tbody>
        </table>

      </div>

      <!-- anchor tweet section -->
      <div style="display: flex; justify-content: center; align-items: center">
        <button id="button_anchor" onclick="show('anchor')" style="display: block" class="show_button">
          STEP 2: Click to see Tweet 4
        </button>
      </div>
      <div style="display: flex; justify-content: center; align-items: center">
        <p id="step2_error" style="color: red; margin: 10px; font-weight: bold; font-size: medium; display: none;">
          Before going to STEP 2, you have to complete STEP 1 to see Tweets 1, 2, and 3!
        </p>
      </div>
      <br />
      <div class="panel-body" id="table_anchor" style="font-size: 1.0em; line-height: 1.6em; display: none;">

        <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em" width="500">
          <tbody style="font-size: 1.0em; line-height: 1.6em;">

            <tr>
              <td colspan="2">
                <div>
                  <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 4</p>
                  <br>
                  <img src=${anchor_url} alt="anchor tweet" class="anchor_img_center" />
                </div>
              </td>
            </tr>

          </tbody>
        </table>

      </div>

      <!-- context tweets after section -->
      <div style="display: flex; justify-content: center; align-items: center">
        <button id="button_after" onclick="show('after')" style="display: block" class="show_button">
          STEP 3: Click to see Tweets 5, 6, and 7
        </button>
      </div>
      <div style="display: flex; justify-content: center; align-items: center">
        <p id="step3_error" style="color: red; margin: 10px; font-weight: bold; font-size: medium; display: none;">
          Before going to STEP 3, you have to complete STEP 2 to see Tweets 1, 2, and 3!
        </p>
      </div>
      <br />
      <div class="panel-body" id="table_after" style="font-size: 1.0em; line-height: 1.6em; display: none;">

        <table align="center" border="1" style="font-size: 1.0em; line-height: 1.6em;" width="1350">
          <tbody style="font-size: 1.0em; line-height: 1.6em;">

            <!-- context tweets before -->
            <tr>
              <td width="450">
                <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 5</p>
                <img src=${context11_url} alt="context tweet10" class="context_img_center">
              </td>
              <td width="450">
                <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 6</p>
                <img src=${context12_url} alt="context tweet11" class="context_img_center">
              </td>
              <td width="450">
                <p style="text-align: center; margin: 10px; font-weight: bold; font-size: large">Tweet 7</p>
                <img src=${context13_url} alt="context tweet12" class="context_img_center">
              </td>
            </tr>

          </tbody>
        </table>

      </div>

      <!-- question part -->
      <div class="panel-body" style="font-size: 1.0em; line-height: 1.6em;">
        <table align="center" border="1" height="276" style="font-size: 1.0em; line-height: 1.6em;" width="900">
          <tbody style="font-size: 1.0em; line-height: 1.6em;">

            <tr>
              <td colspan="3">
                <p class="question_title">Questions</p>
              </td>
            </tr>
            <tr>
              <td width="300">
                <p class="question_describe"><span>1. Was the author of the tweets located in <span style="color: rgb(128, 0, 0);"><strong>${anchor_location}</strong></span> when the middle tweet was posted?</span></p>
              </td>
              <td width="300">
                <p class="question_describe"><span>2. How confident are you about your answer?</span></p>
              </td>
            </tr>
            <tr>
              <td width="300">

                <p class="option"><input id="id_Q1yes" name="Q1" type="radio" value="Yes" required/><span class="option_label">Yes</span>, the author of the tweets was located in <span style="color: rgb(128, 0, 0);"><strong>${anchor_location}</strong></span> when the middle tweet was posted.</p>

                <p class="option"><input id="id_Q1no" name="Q1" type="radio" value="No" required/><span class="option_label">No</span>, I cannot determine if the author of the tweets was located in <span style="color: rgb(128, 0, 0);"><strong>${anchor_location}</strong></span> when the middle tweet was posted.</p>

              </td>
              <td width="300">

                <p class="option"><input id="id_Q2_5" name="Q2" type="radio" value="5" required/><span class="option_label">5. Extremely confident</span></p>

                <p class="option"><input id="id_Q2_4" name="Q2" type="radio" value="4" required/><span class="option_label">4</span></p>

                <p class="option"><input id="id_Q2_3" name="Q2" type="radio" value="3" required/><span class="option_label">3</span></p>

                <p class="option"><input id="id_Q2_2" name="Q2" type="radio" value="2" required/><span class="option_label">2</span></p>

                <p class="option"><input id="id_Q2_1" name="Q2" type="radio" value="1" required/><span class="option_label">1. Not confident at all</span></p>

              </td>
            </tr>

          </tbody>

        </table>

      </div>

    </div>

  </div>

</section>

